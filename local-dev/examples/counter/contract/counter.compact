// counter.compact
// シンプルなカウンターコントラクト

pragma language_version >= 0.18.0;

// オンチェーン状態（すべての参加者に公開）
export ledger count: Uint<64>;

// コントラクト初期化
constructor() {
  count = 0 as Uint<64>;
}

// カウントを1増やす
export circuit increment(): [] {
  count = (count + 1) as Uint<64>;
}

// カウントを1減らす
export circuit decrement(): [] {
  assert(count > 0, "count must be greater than 0");
  count = (count - 1) as Uint<64>;
}

// 現在のカウントを取得
export circuit get_count(): Uint<64> {
  return count;
}

// 指定した値を加算（値は公開される）
export circuit add(value: Uint<64>): [] {
  count = (count + disclose(value)) as Uint<64>;
}
